<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Reproductor IPTV</title>
</head>

<style>
    * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    background-color: #f4f4f4;
    color: #333;
}

header {
    background: #007BFF;
    color: #fff;
    padding: 20px;
    text-align: center;
}

.channel-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 20px 0;
}

.channel {
    background: white;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin: 10px;
    padding: 10px;
    text-align: center;
    cursor: pointer;
    transition: 400ms;
}

.channel:hover {
    background: #e0e0e0;
    border: solid 2px blue;
}

video {
    width: 100%;
    max-width: 800px;
    margin: 20px auto;
    border: 1px solid #ccc;
    border-radius: 5px;
}

footer {
    text-align: center;
    padding: 10px;
    background: #007BFF;
    color: white;
}

.fondo {
    justify-content: center center;
    text-align: center;
    align-items: center;
    background: url(fondo.avif);
    padding: 20%;
    background-repeat: no-repeat;
    background-size: cover;
}

</style>

<body>
    <header>
        <h1>EL VAR TV</h1>
    </header>

    <div class="fondo"></div>

    <main>
        <div id="channel-list" class="channel-list"></div>
    </main>
    <footer>
        <p>&copy; 2024 EL VAR</p>
    </footer>
    <script>
        const channelList = document.getElementById('channel-list');
const videoPlayer = document.getElementById('video-player');

// Función para cargar la lista de canales
async function loadChannels() {
    const response = await fetch('https://r3d-ghost.github.io/ftv/404/tv.m3u8');
    const data = await response.text();
    const channels = parseM3U8(data);
    displayChannels(channels);
}

// Función para analizar el archivo M3U8
function parseM3U8(data) {
    const lines = data.split('\n');
    const channels = [];
    for (let i = 0; i < lines.length; i++) {
        if (lines[i].startsWith('#EXTINF')) {
            const channelInfo = lines[i].split(',');
            const title = channelInfo[1].trim();
            const url = lines[i + 1].trim();
            channels.push({ title, url });
        }
    }
    return channels;
}

// Función para mostrar los canales en la interfaz
function displayChannels(channels) {
    channels.forEach(channel => {
        const channelDiv = document.createElement('div');
        channelDiv.className = 'channel';
        channelDiv.textContent = channel.title;
        channelDiv.onclick = () => playChannel(channel.url);
        channelList.appendChild(channelDiv);
    });
}

// Función para reproducir el canal seleccionado
function playChannel(url) {
    let playerUrl = url;

    // Verifica si la URL es de AceStream
    if (!url.startsWith('acestream://')) {
        // Modifica la URL para que se pueda abrir con otro reproductor si no es AceStream
        playerUrl = `acestream://${url}`; // o deja la URL original según sea necesario
    }

    const openWithAceStream = confirm(`¿Deseas abrir este canal con AceStream?\n\n${url}`);
    if (openWithAceStream) {
        window.open(playerUrl, '_blank');
    }
}

// Cargar canales al iniciar
loadChannels();

    </script>
</body>
</html>
